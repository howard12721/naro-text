# プロキシの設定
API へ接続するためにプロキシを設定します。
`localhost:5173/api/*`へのリクエストを、自分のサーバーの`localhost:8080`へプロキシする設定を書きます。

:::info プロキシとは
`http://localhost`にアクセスすると、`npm run dev`で起動している手元のサーバーにリクエストが飛んで、`index.html`などの静的なファイルがレスポンスとして返ってきます。
ログインや街の情報の取得などは、リモートのサーバーに送信したいわけですが、`localhost:5173`から配信されているクライアントから`localhost:8080`に対してリクエストを送ろうとするとブラウザのセキュリティ機構に制限されたりと面倒なことがあります。
これらを避けるために、`localhost:8080/*`へのリクエストを`localhost:5173/api/*`として手元のサーバーに送信し、手元のサーバーがブラウザの代わりにリモートのサーバーにリクエストを送信します。手元のサーバーは、リモートのサーバーからのレスポンスを透過的にブラウザに返却するので、ブラウザからはあたかも`localhost:5173/api/*`がレスポンスを返しているように見えます。
このように、何らかの目的のために代理で通信するサーバーをプロキシサーバーと呼び、プロキシサーバーに通信を中継させることを「プロキシを挟む」と呼びます。

参考:<br>
[オリジン間リソース共有 (CORS) | MDN](https://developer.mozilla.org/ja/docs/Web/HTTP/CORS)<br>
[プロキシ | Wikipedia](https://ja.wikipedia.org/wiki/%E3%83%97%E3%83%AD%E3%82%AD%E3%82%B7)
:::

プロジェクトルートの`vite.config.ts`というファイルの内容を、以下の内容に変更します。

<<<@/chapter2/section2/src/1/vite.config.ts{typescript:line-numbers}

:::tip
VSCode の Settings から`Format on Save`にチェックを入れると、自動できれいなコードに直してくれます。
:::

:::info
サーバーで CORS を設定することでもブラウザが通信できるようになります。クライアントとサーバーをそれぞれ別のオリジンで配信する場合はこちらの方法を用います。

<<<@/chapter2/section2/src/1/main.go{go:line-numbers}

この設定をした場合、以降の`/api/*`にアクセスしている部分を`http://localhost:8080/*`へアクセスさせるようにしてください。
:::